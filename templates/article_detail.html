{% extends "base.html" %}

{% block title %}{{ article.title }} - Knowledge Base - WDP{% endblock %}

{% block extra_css %}
<style>
  .article-container {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 2rem;
    line-height: 1.8;
    color: var(--text);
  }

  .article-meta {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid var(--border-color);
    flex-wrap: wrap;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--muted-text);
  }

  .meta-item strong {
    color: var(--text);
  }

  .difficulty-badge {
    display: inline-block;
    padding: 0.35rem 0.75rem;
    border-radius: 50px;
    font-size: 0.8rem;
    font-weight: 600;
  }

  .difficulty-beginner { background: var(--success); color: white; }
  .difficulty-intermediate { background: var(--warning); color: var(--primary-bg); }
  .difficulty-advanced { background: var(--accent); color: white; }

  .article-content h2 {
    margin-top: 2rem;
    margin-bottom: 1rem;
    color: var(--accent);
    font-weight: 700;
  }

  .article-content h3 {
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--action);
    font-weight: 600;
  }

  .article-content p {
    color: var(--text);
    margin-bottom: 1rem;
  }

  .article-content ul, .article-content ol {
    color: var(--text);
    margin-bottom: 1rem;
    margin-left: 1.5rem;
  }

  .article-content li {
    margin-bottom: 0.5rem;
  }

  .article-content code {
    background: var(--secondary-bg);
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    color: var(--accent);
    font-family: 'Courier New', monospace;
  }

  .article-content pre {
    background: var(--secondary-bg);
    padding: 1rem;
    border-radius: 8px;
    overflow-x: auto;
    margin-bottom: 1rem;
    color: var(--text);
  }

  .tip-box {
    background: var(--secondary-bg);
    border-left: 4px solid var(--action);
    padding: 1rem;
    border-radius: 8px;
    margin: 1.5rem 0;
    color: var(--text);
  }

  .related-articles {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 2rem;
    margin-top: 2rem;
  }

  .related-item {
    padding: 1rem;
    border-bottom: 1px solid var(--border-color);
    transition: all var(--transition-speed);
  }

  .related-item:last-child {
    border-bottom: none;
  }

  .related-item:hover {
    background: var(--secondary-bg);
    border-radius: 8px;
  }

  .related-link {
    color: var(--action);
    text-decoration: none;
    font-weight: 600;
  }

  .related-link:hover {
    text-decoration: underline;
  }

  .breadcrumb {
    background: transparent;
    padding: 1rem 0;
  }

  .breadcrumb-item a {
    color: var(--action);
  }

  .breadcrumb-item.active {
    color: var(--text);
  }

  @media (max-width: 768px) {
    .article-container {
      padding: 1.5rem;
    }

    .article-meta {
      flex-direction: column;
    }
  }
</style>
{% endblock %}

{% block content %}
    <div class="page-header">
        <h1 class="page-title"><i class="fas fa-newspaper"></i> {{ article.title }}</h1>
    </div>

    <div class="row">
      <div class="col-lg-8">
        <!-- Article Container -->
        <div class="article-container">
          <!-- Metadata -->
          <div class="article-meta">
            <div class="meta-item">
                <span class="difficulty-badge difficulty-{{ article.difficulty }}">{{ article.difficulty|upper }}</span>
              </div>
              <div class="meta-item">
                <span>üìÅ</span>
                <strong>{{ article.category|capitalize }}</strong>
              </div>
              <div class="meta-item">
                <span>üìÖ</span>
                <span>{{ article.created_date }}</span>
              </div>
          </div>

          <!-- Article Content -->
          <div class="article-content">
            <p style="font-size: 1.1rem; color: var(--text);">
              {{ article.content }}
            </p>

            <div class="tip-box">
              <strong><i class="fas fa-lightbulb" style="color: var(--accent);"></i> Tip:</strong> Check our FAQ or contact support for further help.
            </div>
          </div>

          <!-- CTA -->
          <div style="background: var(--secondary-bg); padding: 1.5rem; border-radius: 8px; margin-top: 2rem; border: 1px solid var(--border-color);">
            <h6 style="color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Need more help?</h6>
            <p style="color: var(--muted-text); margin-bottom: 1rem;">Our support team is ready to assist.</p>
            <a href="{{ url_for('tickets') }}" class="btn btn-primary"><i class="fas fa-ticket-alt"></i> Submit Ticket</a>
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="col-lg-4">
        <div style="background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 8px; padding: 1.5rem;">
            <h6 style="color: var(--accent); font-weight: 600; margin-bottom: 1rem;"><i class="fas fa-info-circle"></i> About This Article</h6>
            <ul style="list-style: none; padding: 0; margin: 0;">
              <li style="margin-bottom: 0.75rem;">
                <small style="color: var(--muted-text);">Difficulty</small><br>
                <span class="difficulty-badge difficulty-{{ article.difficulty }}">{{ article.difficulty|capitalize }}</span>
              </li>
              <li style="margin-bottom: 0.75rem;">
                <small style="color: var(--muted-text);">Category</small><br>
                <span style="color: var(--text);">{{ article.category|capitalize }}</span>
              </li>
              <li>
                <small style="color: var(--muted-text);">Published</small><br>
                <span style="color: var(--text);">{{ article.created_date }}</span>
              </li>
            </ul>
        </div>
      </div>
    </div>

    <!-- Related Articles -->
    <div class="related-articles">
      <h5 style="color: var(--accent); font-weight: 600; margin-bottom: 1rem;"><i class="fas fa-book-open"></i> Related</h5>
      <div class="related-item">
        <a href="{{ url_for('knowledge_base') }}" class="related-link">Back to Knowledge Base &rarr;</a>
      </div>
      <div class="related-item">
        <a href="{{ url_for('search', q=article.category) }}" class="related-link">More in {{ article.category }} &rarr;</a>
      </div>
      <div class="related-item">
        <a href="{{ url_for('contact') }}" class="related-link">Contact Support &rarr;</a>
      </div>
    </div>
{% endblock %}
